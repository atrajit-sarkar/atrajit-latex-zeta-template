%=============================================================================
% UTILITY MACROS AND VISUAL ELEMENTS - ROYAL THEME
%=============================================================================

%-----------------------------------------------------------------------------
% Mathematical Decorations - Crown Symbol Design
%-----------------------------------------------------------------------------

% Elegant crown symbol with royal luxury styling
\providecommand{\zetacircle}{%
    \tikz[baseline=-0.6ex]{
        % Outer decorative frame with gold accent
        \draw[
            royalAccent,
            line width=0.7pt,
            rounded corners=0.5pt
        ] (0,0.6em) -- (0.52em,0.3em) -- (0.52em,-0.3em) -- 
          (0,-0.6em) -- (-0.52em,-0.3em) -- (-0.52em,0.3em) -- cycle;
        
        % Inner circle with royal gradient
        \fill[royalLight!40] (0,0) circle (0.5em);
        \draw[
            royalPrimary,
            line width=0.6pt
        ] (0,0) circle (0.5em);
        
        % Crown decoration
        \node[
            text=royalSecondary,
            font=\small,
            inner sep=0pt
        ] at (0,0.02em) {$\bigstar$};
        
        % Small gold dots for luxury
        \foreach \angle in {45,135,225,315} {
            \fill[royalAccent, opacity=0.6] (\angle:0.42em) circle (0.04em);
        }
    }%
}

%-----------------------------------------------------------------------------
% Footer Design: Regal Banner with Gold Accents
%-----------------------------------------------------------------------------

\providecommand{\fancyFootPageNum}{
    \setlength{\footskip}{60pt}
    \renewcommand{\footrulewidth}{0pt}
    \fancyfoot[C]{
        \vspace{6pt}
        \begin{tikzpicture}[baseline=(page.base)]
            % Left royal ornament
            \node[
                text=royalAccent,
                font=\small
            ] (left) at (-1.8,0) {$\clubsuit$};
            
            % Left decorative line with gradient effect
            \draw[royalSecondary, line width=0.5pt] 
                (-1.5,0) -- (-0.6,0);
            \draw[royalAccent, line width=0.3pt, opacity=0.5] 
                (-1.5,0.05) -- (-0.6,0.05);
            
            % Main page number shield
            \node[
                rectangle,
                rounded corners=4pt,
                draw=royalPrimary,
                fill=royalLight!20,
                line width=0.7pt,
                inner xsep=10pt,
                inner ysep=4pt,
                text=royalPrimary,
                font=\small\bfseries,
                drop shadow={opacity=0.2, shadow xshift=0.8pt, shadow yshift=-0.8pt, fill=royalDark}
            ] (page) at (0,0) {\thepage};
            
            % Gold crown accent above page number
            \node[
                text=royalAccent,
                font=\tiny,
                yshift=8pt
            ] at (page.north) {$\bigstar$};
            
            % Right decorative line
            \draw[royalSecondary, line width=0.5pt] 
                (0.6,0) -- (1.5,0);
            \draw[royalAccent, line width=0.3pt, opacity=0.5] 
                (0.6,0.05) -- (1.5,0.05);
            
            % Right royal ornament
            \node[
                text=royalAccent,
                font=\small
            ] (right) at (1.8,0) {$\clubsuit$};
            
        \end{tikzpicture}%
    }
}

%-----------------------------------------------------------------------------
% Header Design: Royal Manuscript Style
%-----------------------------------------------------------------------------

\providecommand{\fancyHeaderContent}{
    % Custom header rule with regal styling
    \renewcommand{\headrulewidth}{0pt}
    
    % Decorative header lines with gold accent
    \fancyhead[L]{%
        \begin{tikzpicture}[remember picture, overlay]
            \draw[royalPrimary, line width=0.6pt] 
                ([yshift=-2pt]current page.north west) ++(\oddsidemargin+1in,0) -- 
                ++(\textwidth,0);
            \draw[royalAccent, line width=0.3pt, opacity=0.6] 
                ([yshift=-4pt]current page.north west) ++(\oddsidemargin+1in,0) -- 
                ++(\textwidth,0);
        \end{tikzpicture}%
    }
    
    % Center header: Section information with crown decoration
    \fancyhead[C]{%
        \footnotesize\itshape\color{royalDark}%
        \leftmark%
        \enspace%
        \textcolor{royalAccent}{$\sim$}%
        \;\zetacircle\;%
        \textcolor{royalAccent}{$\sim$}%
        \enspace%
        \rightmark%
    }
    
    % Right header: Magic icon
    \fancyhead[R]{%
        \footnotesize\textcolor{royalSecondary}{\faMagic}%
    }
}

%-----------------------------------------------------------------------------
% Ornamental Section Break
%-----------------------------------------------------------------------------

% Decorative section separator with royal luxury
\providecommand{\sectionbreak}{%
    \vspace{1.2em}
    \begin{center}
        \begin{tikzpicture}
            % Left ornamental line
            \draw[royalSecondary, line width=0.4pt, opacity=0.6] 
                (-2.5,0) -- (-1.2,0);
            \draw[royalAccent, line width=0.2pt, opacity=0.4] 
                (-2.5,0.08) -- (-1.2,0.08);
            
            % Left gold club
            \node[text=royalAccent, font=\small] at (-0.85,0) {$\clubsuit$};
            
            % Central royal symbol
            \node at (0,0) {\zetacircle};
            
            % Right gold club
            \node[text=royalAccent, font=\small] at (0.85,0) {$\clubsuit$};
            
            % Right ornamental line
            \draw[royalSecondary, line width=0.4pt, opacity=0.6] 
                (1.2,0) -- (2.5,0);
            \draw[royalAccent, line width=0.2pt, opacity=0.4] 
                (1.2,0.08) -- (2.5,0.08);
            
            % Corner decorations
            \fill[royalAccent, opacity=0.3] (-2.6,0) circle (0.05);
            \fill[royalAccent, opacity=0.3] (2.6,0) circle (0.05);
        \end{tikzpicture}
    \end{center}
    \vspace{1.2em}
}
