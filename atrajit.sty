\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{atrajit}[2025/01/01 Atrajit's Professional Mathematics & MZV Package]

%=============================================================================
% PACKAGE DEPENDENCIES
%=============================================================================

% --- Core Mathematics Packages ---
\RequirePackage{amsmath}           % Advanced math typesetting
\RequirePackage{amssymb}           % Mathematical symbols
\RequirePackage{amsfonts}          % Mathematical fonts
\RequirePackage{mathtools}         % Enhanced math environments
\RequirePackage{amsthm}            % Theorem environments
\RequirePackage{bm}                % Bold mathematics
\RequirePackage{mathrsfs}          % Script fonts for mathematics

% --- Graphics and Visualization ---
\RequirePackage{xcolor}            % Color support
\RequirePackage{graphicx}          % Graphics inclusion
\RequirePackage{tikz}              % Advanced graphics
\RequirePackage{tikz-cd}           % Commutative diagrams
\usetikzlibrary{positioning, shapes.misc, shapes.symbols, shapes.geometric}

% --- Document Layout and Typography ---
\RequirePackage{geometry}          % Page layout control
\RequirePackage{fancyhdr}          % Custom headers and footers
\RequirePackage{enumitem}          % Enhanced list environments
\RequirePackage{fontawesome}       % Icon fonts

% --- Bibliography Management ---
\RequirePackage[backend=biber,style=ieee]{biblatex}

% --- Hyperlinks (load last) ---
\RequirePackage{hyperref}          % Hyperlinks and cross-references

%=============================================================================
% COLOR SCHEME - Professional Academic Blue Palette
%=============================================================================

% Define custom colors for the Zeta theme
\definecolor{zetaPrimary}{RGB}{30, 70, 130}       % Deep Blue - scholarly elegance
\definecolor{zetaSecondary}{RGB}{65, 105, 225}    % Royal Blue - refined accent
\definecolor{zetaAccent}{RGB}{100, 149, 237}      % Cornflower Blue - highlight
\definecolor{zetaDark}{RGB}{25, 25, 112}          % Midnight Blue - dark text
\definecolor{zetaLight}{RGB}{230, 240, 255}       % Alice Blue - subtle background

%=============================================================================
% UTILITY MACROS AND VISUAL ELEMENTS
%=============================================================================

% Elegant zeta symbol with professional academic styling
\providecommand{\zetacircle}{%
    \tikz[baseline=-0.65ex]{
        \draw[blue!50!black, line width=0.5pt, opacity=0.6] (0,0) circle (0.65em);
        \fill[blue!15!white] (0,0) circle (0.55em);
        \draw[blue!75!black, line width=0.6pt] (0,0) circle (0.55em);
        \node[text=blue!80!black, font=\footnotesize\boldmath, inner sep=0pt] at (0,0) {$\zeta$};
    }%
}

% Footer Design: Professional Cloud Thought Bubble
\providecommand{\fancyFootPageNum}{
    \setlength{\footskip}{50pt}
    \renewcommand{\footrulewidth}{0.2pt}
    \fancyfoot[C]{
        \raisebox{8pt}{%
            \begin{tikzpicture}[baseline=(main.base), scale=0.55]
                \node[circle, fill=blue!40, inner sep=0.3pt] (t1) at (0,0) {};
                \node[circle, fill=blue!45, inner sep=0.5pt] (t2) at (0.12,0.04) {};
                \node[circle, fill=blue!50, inner sep=0.7pt] (t3) at (0.26,0.07) {};
                \node[cloud, cloud puffs=15, cloud puff arc=120, aspect=2.5,
                      draw=blue!70!black, line width=0.3pt, fill=blue!8,
                      inner xsep=1.2pt, inner ysep=0.8pt,
                      text=blue!80!black, font=\footnotesize, right=0.12cm of t3] (main)
                      {$\thepage\!\cdot\!\boldsymbol{\zeta(\emptyset)}$};
            \end{tikzpicture}%
        }
    }
}

% Helper to test for empty tokens
\providecommand{\ifBlankTF}[3]{%
    \if\relax\detokenize{#1}\relax #2\else #3\fi
}

% Header Design: Professional Academic Book Style
\providecommand{\fancyHeaderContent}{
    \renewcommand{\headrulewidth}{0.4pt}
    \fancyhead[C]{%
        \footnotesize\itshape%
        \nouppercase{\leftmark}%
        \quad$\sim$\raisebox{-0.1ex}{\zetacircle}$\sim$\quad\nouppercase{\rightmark}%
    }
    \fancyhead[R]{\footnotesize\textcolor{blue!65!black}{\faBook}}
}

% Ornamental Section Break
\providecommand{\sectionbreak}{%
    \vspace{1.5em}
    \begin{center}
        \begin{tikzpicture}
            \draw[zetaSecondary, line width=0.3pt, opacity=0.6] (-2.5,0) -- (-1,0);
            \node[text=zetaSecondary, font=\small] at (-0.7,0) {$\diamond$};
            \node at (0,0) {\zetacircle};
            \node[text=zetaSecondary, font=\small] at (0.7,0) {$\diamond$};
            \draw[zetaSecondary, line width=0.3pt, opacity=0.6] (1,0) -- (2.5,0);
            \fill[zetaAccent, opacity=0.4] (-2.6,0) circle (0.04);
            \fill[zetaAccent, opacity=0.4] (2.6,0) circle (0.04);
        \end{tikzpicture}
    \end{center}
    \vspace{1.5em}
}

%=============================================================================
% MATHEMATICAL AND TEXT MACROS
%=============================================================================

% Common Mathematical Sets
\providecommand{\RR}{\ensuremath{\mathbb{R}}}
\providecommand{\NN}{\ensuremath{\mathbb{N}}}
\providecommand{\ZZ}{\ensuremath{\mathbb{Z}}}
\providecommand{\QQ}{\ensuremath{\mathbb{Q}}}
\providecommand{\CC}{\ensuremath{\mathbb{C}}}

% Equation Numbering Control
\providecommand{\useSubsubsectionEqNum}{
  \makeatletter
  \numberwithin{equation}{subsubsection}
  \makeatother
}

% Footnote Styling
\makeatletter
\renewcommand{\thefootnote}{$\zeta_{[\arabic{footnote}]}$}
\makeatother

% Text Highlighting Commands
\providecommand{\mathterm}[1]{\textcolor{zetaPrimary}{\textbf{#1}}}
\providecommand{\defterm}[1]{\textcolor{zetaSecondary}{\textit{#1}}}
\providecommand{\code}[1]{\texttt{\textcolor{zetaDark}{#1}}}

% Key Concept Box
\providecommand{\keybox}[1]{%
    \begin{center}
        \fcolorbox{zetaPrimary}{zetaLight}{%
            \begin{minipage}{0.9\textwidth}
                \vspace{8pt}
                \centering
                #1%
                \vspace{8pt}
            \end{minipage}%
        }
    \end{center}
}

% Reference Shortcuts
\providecommand{\thmref}[1]{Theorem~\ref{#1}}
\providecommand{\lemref}[1]{Lemma~\ref{#1}}
\providecommand{\propref}[1]{Proposition~\ref{#1}}
\providecommand{\corref}[1]{Corollary~\ref{#1}}
\providecommand{\defref}[1]{Definition~\ref{#1}}
\providecommand{\exref}[1]{Example~\ref{#1}}

%=============================================================================
% PAGE LAYOUT CONFIGURATION
%=============================================================================

% Set professional margins
\geometry{margin=1in}

% Configure page style with fancy headers/footers
\pagestyle{fancy}
\fancyhf{}                          % Clear default settings
\setlength{\headheight}{26pt}       % Ensure adequate header space

% Plain page style for title pages and chapter beginnings
\fancypagestyle{plain}{%
	\fancyhf{}
	\renewcommand{\headrulewidth}{0pt}
	\fancyFootPageNum
}

%=============================================================================
% HEADER AND FOOTER CUSTOMIZATION
%=============================================================================

% Apply custom footer and header commands (defined in utils.tex)
\fancyFootPageNum
\fancyHeaderContent

% Professional section marking (academic book style)
% Section: Display with section symbol (ยง)
\renewcommand{\sectionmark}[1]{%
    \markboth{{\scshape\S\,\thesection}\enspace\raisebox{-0.15ex}{$\cdot$}\enspace#1}{}%
}

% Subsection: Display with section symbol
\renewcommand{\subsectionmark}[1]{%
    \markright{\S\,\thesubsection\enspace#1}%
}

%=============================================================================
% CUSTOM UTILITY COMMANDS
%=============================================================================

% TODO marker with coffee icon
\newcommand{\todotea}{\textbf{\textcolor{zetaPrimary}{TODO}}~\faCoffee}

% Note marker with bell icon
\newcommand{\notebell}{\textcolor{zetaPrimary}{\faBell}\enspace\textbf{Note:}}

% Important marker with exclamation
\newcommand{\importantmark}{\textcolor{zetaPrimary}{\faExclamationTriangle}\enspace\textbf{Important:}}



%=============================================================================
% THEOREM ENVIRONMENTS
%=============================================================================

% Primary theorem-like environments (numbered by subsection)
\newtheorem{theorem}{Theorem}[subsection]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{example}[theorem]{Example}

% Definition-style environments
\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}

% Remark-style environments
\theoremstyle{remark}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{note}[theorem]{Note}

%=============================================================================
% HYPERLINK STYLING
%=============================================================================

\hypersetup{
    colorlinks=true,
    linkcolor=zetaPrimary,
    citecolor=zetaSecondary,
    urlcolor=zetaAccent,
    bookmarksnumbered=true,
    bookmarksopen=true,
    bookmarksopenlevel=1,
    pdfstartview=Fit,
    pdfpagemode=UseOutlines
}

% Reset section counter to start from 1
\setcounter{section}{0}

\endinput
